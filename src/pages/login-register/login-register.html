<!--
  Generated template for the LoginRegisterPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-content padding>
  <form *ngIf="hasAccount" (ngSubmit)="login();" #loginForm="ngForm">
    <ion-item>
      <ion-label>Username</ion-label>
      <ion-input type="text" [(ngModel)]="userData.username" name="username"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Password</ion-label>
      <ion-input type="text" [(ngModel)]="userData.password" name="password"></ion-input>
    </ion-item>
    <button ion-button type="submit" block>Log in</button>
    <a link href="#" (click)="hasAccount=false" block>Don't have an account yet?</a>
  </form>

  <form *ngIf="!hasAccount" (ngSubmit)="register()" #registerForm="ngForm">
    <ion-item>
      <ion-label>Username</ion-label>
      <ion-input type="text" [(ngModel)]="registerData.username" name="newUsername" [required]="usernameCheck" (ionBlur)="checkUsername()"></ion-input>
    </ion-item>
    <ion-item *ngIf="!usernameCheck">
      <p>Username is taken!</p>
    </ion-item>
    <ion-item>
      <ion-label>Password</ion-label>
      <ion-input type="text" [(ngModel)]="registerData.password" name="newPassword" minlength="6" required></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Confirm password</ion-label>
      <ion-input type="text" [(ngModel)]="passwordCheck" name="passwordCheck" minlength="6" required (ionBlur)="checkPassword()"></ion-input>
    </ion-item>
    <ion-item *ngIf="!passwordMatch">
      <p>Password doesn't match!</p>
    </ion-item>
    <ion-item>
      <ion-label>Email</ion-label>
      <ion-input type="text" [(ngModel)]="registerData.email" name="newEmail"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Full name</ion-label>
      <ion-input type="text" [(ngModel)]="registerData.full_name" name="newFullName"
                 pattern="^[A-Za-z\s]{1,}[ ]{0,1}[A-Za-z\s]{0,}$"></ion-input>
    </ion-item>
    <button ion-button type="submit" block>Register</button>
    <a link href="#" (click)="hasAccount=true" block>Already have an account?</a>
  </form>
</ion-content>
